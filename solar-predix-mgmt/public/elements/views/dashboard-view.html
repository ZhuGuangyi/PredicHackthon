<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/google-map/google-map.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/px-chart/px-chart.html"> 
<link rel="import" href="../../bower_components/px-chart/px-chart-series-line.html">
<link rel="import" href="../../bower_components/px-simple-line-chart/px-simple-line-chart.html">
<link rel="import" href="../../bower_components/px-vis-timeseries/px-vis-timeseries.html">
<link rel="import" href="../../bower_components/px-simple-bar-chart/px-simple-bar-chart.html">
<link rel="import" href="../../bower_components/google-chart/google-chart.html">
<link rel="import" href="../../bower_components/google-chart/google-chart-loader.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="../../bower_components/px-chart/px-chart-controls.html">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<!-- <script src="https://code.highcharts.com/highcharts.js"></script> 
<script src="https://code.highcharts.com/highcharts-more.js"></script> -->
<!-- <script src="https://code.highcharts.com/modules/solid-gauge.js"></script> -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="import" href="../../bower_components/px-modal/px-modal.html">
<link rel="import" href="../../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="../../bower_components/px-spinner/px-spinner.html">
 <script>
	      //var map = document.querySelector('google-map');
	      //alert(map)
	     // map.styles = [{"featureType":"administrative","elementType":"all","stylers":[{"visibility":"on"},{"lightness":33}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2e5d4"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#c5dac6"}]},{"featureType":"poi.park","elementType":"labels","stylers":[{"visibility":"on"},{"lightness":20}]},{"featureType":"road","elementType":"all","stylers":[{"lightness":20}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#c5c6c6"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#e4d7c6"}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#fbfaf7"}]},{"featureType":"water","elementType":"all","stylers":[{"visibility":"on"},{"color":"#acbcc9"}]}]; 
	      </script>	

<dom-module id="dashboard-view">
<style is="custom-style">
#load-dashboard{
justify-content:center;
display:flex;
margin:auto;
margin-top:190px;

}
  #content-dashboard,#content1-dashboard{
visibility:hidden;
}
@font-face{
 		font-family:'BebasNeue-font';
 		src: url('BebasNeue.otf');
		}
		
.weather{
height:70px;
color:white;
text-align:center;
font-family:Arial;
font-size: 18px;
}

#weatherWidgets{
display:flex;
flex-flow:row;
}
	#weatherWidget1{
	flex:25%;
	margin:10px;
	}
	#weatherWidget2{
	flex:25%;
	margin:10px;
	}
	#weatherWidget3{
	flex:25%;
	margin:10px;
	}
	#weatherWidget4{
	flex:25%;
	margin:10px;
	}
@media all and (max-width:762px) {
	#weatherWidgets {
	flex-direction: column;
	}
  }

  
  
  
#alerts{
height:300px;
background-color:#15967d;//#C0392B;

}
#mapView{
display:flex;
flex-flow:row;
}
	#map{
	flex:80%;
	margin:10px;
	}
	#alertDetails{
	flex:20%;
	margin:10px;
	}
@media all and (max-width:762px) {
	#mapView {
	flex-direction: column;
	}
  }
  
  
  
.timeWidget{
width:33%;
text-align:center;
padding:10px;
margin:1%;
background-color:#27ae60;
cursor:pointer;
font-family:Arial; 
}
 
#timeWidgets{
display:flex;
flex-direction:row;
}
 
	table,th,td{
	border:1px solid black;
	border-collapse:collapse;
	padding:1%;
	font-weight: 200;
	}
	table th {
	background-color:#27ae60;
	color: white;
	height:30px;
	} 
 


#firstrow{
display:flex;
flex-flow:row;
}
	#one{
	flex:70%;
	margin:10px;
	}
	#two{
	flex:30%;
	margin:10px;
	}
@media all and (max-width:850px) {
	#firstrow {
	flex-direction: column;
	}
  } 
  
  
  
  
.heading{
padding:8px;
color:white;
background-color:#117b66;
//text-align:center;
font-size:15px;


} 

#secondrow{
display:flex;
flex-flow:row;
}
	#three{
	flex:70%;
	margin:10px;
	}
	#four{
	flex:30%;
	margin:10px;
	}
@media all and (max-width:850px) {
	#secondrow {
	flex-direction: column;
	}
  }
  
  #boxLayout{
  	display: flex;
    flex-flow: column;
    height: 250px;
    font-family: digital-clock-font;
    font-size: 20px;
   // margin-top: 21px;
    /* line-height: 38px; */
	/* display:flex;
	flex-flow:row;
	height: 211px;
   // background: #1abc9c;
    background:#607D8B;
    font-family: digital-clock-font;
    font-size: 20px;
    border: 3px solid #C0C0C0;
	padding:5px;
	    margin-top: 31px;
	        line-height: 38px; */
}

.digital_color{
color:#FF5722;
}

#boxLeft{
		color: #FFFFFF;
		    margin-left: 70px;

		}
#boxRight{
		color: #FFFFFF;
		}
		
@media all and (max-width:450px) {
	#boxLayout {
	flex-direction: column;
	}
  }
.alertContent{
height:100px;
text-align:center;
border-bottom:1px solid white;
color:white;

}
.alertContent1{
height:100px;
text-align:center;
border-bottom:1px solid 15967d;
color:white;
}
.alertContent1 img,span{
	cursor: pointer;
}
.alertContent1 a{
	cursor: pointer;
	color:#FFFFFF;
	  text-decoration: none;
}
.mapDataCls{
	font-size: 20px;
}
.mapLabelCls{
	font-size: 15px;
}
.combinerBoxLabelImg{
	    height: 30px;
    vertical-align: -10px;
}
.yieldDivs{
	height: 60px;
    width: 98%;
    background: #f0f7eb;
    display: flex;
    flex-flow: row;
    cursor: pointer;
    border-bottom: 1px solid #FFFFFF;
    margin-left: 3px;
}
.yieldDivsChild{
	    width: 60px;
	    background: #27ae60;
	    border-right:1px solid #FFFFFF;
	    padding: 8px;
	    color:#FFFFFF;
}	
.titleSpanY{
	font-size: 12px;
}	
.valueSpanY{
      font-size: 17px;
    color: #206b64;
    margin-top: 6px;
}	
.moreBtn{
	    margin-left: 120px;
    height: 31px;
    margin-top: 15px;
    border-radius: 5px;
    border: 0px;
    cursor: pointer;
    color:#6f6f6f;
}	
.buildingName{
	    margin-top: 5px;
    font-size: 13px;
    color: #90b775;
    font-weight: bold;
	
}

.dateClass{
	margin-left: 2%;margin-top: 6px;width: 48%;font-size: 18px;color:#206b40;
}
.clsHed{
	color: #CCCCCC;font-size: 12px;margin-left: 61%;width: 48%;
}
.dashboard-views{
       cursor: pointer;
       margin-left:0px;
       display:flex;
	flex-flow:columns;
  }
 
       @media (max-width: 412px) {
        .dashboard-views {
    margin-left: 0px;
}
	.dashboard-views{
       cursor: pointer;
       margin-left:0px;
       display:flex;
	flex-direction: column;
  }
  .dateClass{
	    margin-left: 2%;
    margin-top: 6px;
    width: 110%;
    font-size: 18px;
    color: #206b40;
}
.clsHed{
	color: #CCCCCC;
    font-size: 12px;
    margin-left: 0;
    width: 52% !important;
        margin-left: 11px !important;
}
}
       @media (max-width: 768px) {
        .dashboard-views {
    margin-left: 0px;
}
.dashboard-views{
       cursor: pointer;
       margin-left:0px;
       display:flex;
	//flex-direction: column;
  }
  .dateClass{
	    margin-left: 2%;
    margin-top: 6px;
    width: 110%;
    font-size: 18px;
    color: #206b40;
}
.clsHed{
	color: #CCCCCC;
    font-size: 12px;
    margin-left: 0;
    width: 40%;
}
}
.progressCls{
	    margin-top: 4px;
    width: 96%;
    margin-left: 4px;
}
</style>
<template>
<px-spinner id="load-dashboard" size="70"></px-spinner>
<div id="content-dashboard">

<div class="dashboard-views">
<Div  class="dateClass" id="dateIdD">Date : </div>
              <div class="clsHed"><iron-icon  style="width:15px;margin-bottom: 2px;"  icon="fa:fa-tachometer">
			  </iron-icon>&nbsp Home &gt; Dashboard</div>
</div>
<paper-material style="border-top: 1px solid #efefef;">
<div id="firstrow">
<div id="one">
<paper-material>
<div id="weatherWidgets">
		<iron-ajax id="ajax1" auto url="https://solarassetservices.run.aws-usw02-pr.ice.predix.io/Asset/getWetherInfo" 
		last-response="{{data}}" on-response=loadData handleAs="json" on-error="_handleErrorResponse"></iron-ajax>
	<div id="weatherWidget1">
	<paper-material  class="weather"  elevation="1" style="background-color:#009688;" >
		<div style="float:LEFT;margin-top: 22px;margin-left: 10px;">
		<img id="tempDataIconID" src="energy1.png" style="margin: -8px -1px 0px -2px;height: 40px;">
		</div>
		<br>
		<div  class="spanDT" style="margin-top: -15px;" id="dayId1">Energy</div>
		<span id="tempData" style="font-size: 23px;"></span>
	</paper-material>
	</div>
	<div id="weatherWidget2">
	<paper-material  class="weather"  elevation="1" style="background-color:#27ae60;" >
		<div style="float:LEFT;margin-top: 15px;margin-left: 10px;">
		<img src="co2.png" style="margin-top: -4px;">
		</div>
		<br>
		<div class="spanDT" style="margin-top: -15px;">CO<sub>2</sub>&nbsp;Savings</div>
		<span id="windData" style="font-size: 23px;"></span>
	</paper-material>
	</div>
	<div id="weatherWidget3">
	<paper-material  class="weather"  elevation="1" style="background-color:#1abc9c;" >
		<div style="float:LEFT;margin-top: 15px;margin-left: 10px;">
		<img src="tree.png" style="height:50px;    margin-left: -4px;    margin-top: -6px;">
		</div>
		<br>
		<div class="spanDT" style="margin-top: -15px;">Tree&nbsp;Savings</div>
		<span id="humidityData" style="font-size: 23px;"></span>
	</paper-material>
	</div>
	<div id="weatherWidget4">
	<paper-material  class="weather"  elevation="1" style="background-color:#90b775;" >
		<div style="float:LEFT;margin-top: 22px;margin-left: 10px;">
		<!-- <img src="clds.png" style="height:25px;"> -->
		<!-- <iron-icon icon="icons:apps" style="width: 32px;height:32px;margin-top:-2px;"></iron-icon> -->
		 <img src="irradience.png" style="height:38px;margin-top: -6px;" id="wetherInfoImg">
		</div>
		<br>
		<div class="spanDT" style="margin-top: -15px;" id="titleID">Irradiance</div>
		<span id="dashIrrData" style="font-size: 23px;">1062<sub>w/m<sup>2</sup></sub></span>
	</paper-material>
	</div>
</div>

<div id="mapView">
	<div id="map">
		<paper-material  elevation="1">
		<iron-ajax id="googleMapDataIron"
			auto
			url="https://solarassetservices.run.aws-usw02-pr.ice.predix.io/Asset/getClassifications/Blocks"
			last-response="{{blocksData}}"
			on-response="handleGoogleMapData"
			handleAs="json">
		</iron-ajax>
		
		<google-map style="height:300px;" id="googleMap" title="" api-key="AIzaSyDweRIW52uMWr5-Jp3ZC6Q8rm6qoTTl3NQ" fit-to-markers>
		 <template is="dom-repeat" items="{{blocksData.data}}" >
			<google-map-marker click-events="true" on-google-map-marker-click="changeLocation" id="{{item.name}}" latitude="{{item.location.latitude}}" longitude="{{item.location.longitude}}"  title="{{item.name}}" icon='marker.png'>
				{{item.name}}
			</google-map-marker> 
	   	</template> 
			<!-- <google-map-marker latitude="17.573927" longitude="78.436734" title="TMTC-CB2" icon= 'marker.png'>
			TMTC-CB2 , Hyderabad
			</google-map-marker>
			<google-map-marker latitude="17.571171" longitude="78.436083" title="TMTC-IT1" icon= 'marker-selected.png'>
			TMTC-IT1 , Hyderabad
			</google-map-marker>dashboard-view.html
			<google-map-marker latitude="17.570656" longitude="78.435506" title="TMTC-IT2" icon= 'marker.png'>
			TMTC-IT2 , Hyderabad
			</google-map-marker> -->
		</google-map> 
		
		</paper-material>
	</div>
	<div id="alertDetails">
		<paper-material id="alerts">
		<div class="alertContent">
			<center>	 
			<google-chart style="width: 163px;" id="gaugeId" type="gauge" data='[["Label", "Value"],["Energy", 68]]' 
			options='{"width": 100,
                "height": 100,
                "redFrom": 1,
                "redTo": 35,
                "yellowFrom":36,
                "yellowTo": 90,
                "greenFrom":91,
                "greenTo":150,
                "minorTicks": 5,
                "min":1,
                "max" : 150
                }'>
                </center>
		</div>
		
		<div class="alertContent">
		<!-- <br><span class="mapLabelCls">Energy</span><br>
		<span class="mapDataCls" id="mapPowerValId">1062</span> -->
				<br><img alt="" src="revenue.png" style="height: 30px;    vertical-align: -6px;"> <span class="mapLabelCls">Revenue</span><br>
				<span class="mapDataCls" id="revenueId"></span>
				<div class="progressCls">
					<paper-progress id="progressID" value="800" min="0" max="15000" class="yellow" style="width: 97%;"></paper-progress>
				</div>
		</div>
		
		<div class="alertContent1">
			<a href="../../#/alerts">
				<br><img alt="" src="alerts.png" style="height: 30px;vertical-align: -9px;"><span class="mapLabelCls">Alerts</span><br>
				<span class="mapDataCls" id="">4</span>
				</a>
		</div>
		</paper-material>
	</div>

	</div>
</paper-material>
</div>

<div id="two">
<paper-material style="padding:10px 10px 5px 10px">
<div id="timeWidgets">
<paper-material  class="timeWidget" elevation="1" style="color:#FFFFFF;cursor:pointer;" id="dayTab">Day</paper-material>
<paper-material  class="timeWidget" elevation="1" style="color:#FFFFFF;cursor:pointer;background:rgb(130, 224, 170);" id="weekTab">Week</paper-material>
<paper-material  class="timeWidget" elevation="1" style="color:#FFFFFF;cursor:pointer;background:rgb(130, 224, 170);" id="monthTab">Month</paper-material>
</div>

		<div>
		<!-- YIELD
		<table style="width:100%">
		<tr style="background:#27ae60;color:#FFFFFF;"><td align="center">Block</td><td align="center">Energy</td><td align="center">Grid</td></tr>

		<tr><td align="center">IT-1</td><td align="center"><span id="YieldIT1">134.5 KWh</span></td><td align="center">0KWh</td></tr>

		<tr><td align="center">IT-2</td><td align="center"><span id="YieldIT2">134.5 KWh</span></td><td align="center">0KWh</td></tr>

		<tr><td align="center">CB-1</td><td align="center"><span id="YieldIT3">134.5 KWh</span></td><td align="center">0KWh</td></tr>		
				
		<tr><td align="center">CB-2</td><td align="center"><span id="YieldIT4">134.5 KWh</span></td><td align="center">0KWh</td></tr>				
		</table> -->
		</div>
		

		<div>
			<div class="yieldDivs" id="div1">
				<div class="yieldDivsChild">
					<img alt="" src="house.png">
				</div>
				<div style="margin-left:5px;">
					<div class="buildingName">TMTC-IT1</div>
					<div class="valueSpanY"><img src = "energy.png" style="height: 19px;"/><span id="YieldIT1">432.87 KWh</span></div>
				</div>
				<div style="margin-left:25px;display: none;">
				<div>&nbsp;</div>
					<div id="irradienceData1" class="valueSpanY" style="margin-top: 12px;">902.33 W/m2</div>
				</div> 
				<div style="margin-left:32px;">
					<div class="buildingName">&nbsp;</div>
					<div id="Energy" class="valueSpanY"><img src = "grid.png" style="height: 20px;"/><span style="margin-left: 5px;vertical-align: -2px;">0 <span style="font-size:13px;">KWh</span></span></div>
				</div>
			</div>
			<div class="yieldDivs" id="div2">
				<div class="yieldDivsChild">
					<img alt="" src="house.png">
				</div>
				<div style="margin-left:5px;">
					<div class="buildingName">TMTC-IT2</div>
					<div class="valueSpanY"><img src = "energy.png" style="height: 19px;"/><span id="YieldIT2">432.87 KWh</span></div>
				</div>
				<div style="margin-left:25px;display: none;">
					<div id="irradienceData2" class="valueSpanY" style="margin-top: 12px;">902.33 W/m2</div>
				</div> 
				<div style="margin-left:32px;">
					<div class="buildingName">&nbsp;</div>
					<div id="Energy" class="valueSpanY"><img src = "grid.png" style="height: 20px;"/><span style="margin-left: 5px;vertical-align: -2px;">0 <span style="font-size:13px;">KWh</span></span></div>
				</div>
			</div>
			<div class="yieldDivs" id="div3">
				<div class="yieldDivsChild">
					<img alt="" src="house.png">
				</div>
				<div style="margin-left:5px;">
					<div class="buildingName">TMTC-CB1</div>
					<div class="valueSpanY"><img src = "energy.png" style="height: 19px;"/><span id="YieldIT3">432.87 KWh</span></div>
				</div>
				<div style="margin-left:25px;display: none;">
					<div id="irradienceData3" class="valueSpanY" style="margin-top: 12px;">902.33 W/m2</div>
				</div> 
				<div style="margin-left:32px;">
					<div class="buildingName">&nbsp;</div>
					<div id="Energy" class="valueSpanY"><img src = "grid.png" style="height: 20px;"/><span style="margin-left: 5px;vertical-align: -2px;">0 <span style="font-size:13px;">KWh</span></span></div>
				</div>
			</div>
			<div class="yieldDivs" id="div4">
				<div class="yieldDivsChild">
					<img alt="" src="house.png">
				</div>
				<div style="margin-left:5px;">
					<div class="buildingName">TMTC-CB2</div>
					<div class="valueSpanY"><img src = "energy.png" style="height: 19px;"/><span id="YieldIT4">432.87 KWh</span></div>
				</div>
				 <div style="margin-left:25px;display: none;">
					<div id="irradienceData4" class="valueSpanY" style="margin-top: 12px;">902.33 W/m2</div>
				</div> 
				<div style="margin-left:32px;">
					<div class="buildingName">&nbsp;</div>
					<div id="Energy" class="valueSpanY"><img src = "grid.png" style="height: 20px;"/><span style="margin-left: 5px;vertical-align: -2px;">0 <span style="font-size:13px;">KWh</span></span></div>
				</div>
				</div>
				<!-- <div class="yieldDivs">
				</div>
				<div class="yieldDivs">
				</div>
				<div class="yieldDivs">
				</div> -->
				<div class="yieldDivs">
				</div>
				<div class="yieldDivs1" style="display: flex;flex-rows:rows;">
					<!-- <div class="moreBtn" title="Click Here to view More Details">View More.. -->
								
								
		<px-modal  btn-modal-negative="Close" id="popupModel" style="margin-top: 15px;margin-left: 86px;">
  		<button class='btn btn--primary modal-trigger' style="background:#FFFFFF;height: 32px;color: #97bc7e;">
  		View More</button>
 <!--  </div> -->
  <div class="box box--huge" id="filters" style="background:#FFFFFF;padding:15px;margin-top: -50px;">
   <span id="hideSpan" style="visibility:hidden;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span>
  	<br>
  	  <span style="    color: #206b64;    font-weight: bold;    font-size: 15px;">Energy(KWh)</span>
  		<div class="yieldDivs" id="div1" style="    margin-top: 9px;">
  		
				<div class="yieldDivsChild">
					<img alt="" src="house.png">
				</div>
				<div style="margin-left:5px;">
					<div class="buildingName">TMTC-IT1</div>
					<div class="valueSpanY"><img src = "energy.png" style="height: 19px;"/><span id="YieldIT1">432.87 KWh</span></div>
				</div>
				<div style="margin-left:25px;display: none;">
				<div>&nbsp;</div>
					<div id="irradienceData1" class="valueSpanY" style="margin-top: 12px;">902.33 W/m2</div>
				</div> 
				<div style="margin-left:32px;">
					<div class="buildingName">&nbsp;</div>
					<div id="Energy" class="valueSpanY"><img src = "grid.png" style="height: 20px;"/><span style="margin-left: 5px;vertical-align: -2px;">0 <span style="font-size:13px;">KWh</span></span></div>
				</div>
			</div>
    	<div class="yieldDivs" id="div2">
				<div class="yieldDivsChild">
					<img alt="" src="house.png">
				</div>
				<div style="margin-left:5px;">
					<div class="buildingName">TMTC-IT2</div>
					<div class="valueSpanY"><img src = "energy.png" style="height: 19px;"/><span id="YieldIT2">432.87 KWh</span></div>
				</div>
				<div style="margin-left:25px;display: none;">
					<div id="irradienceData2" class="valueSpanY" style="margin-top: 12px;">902.33 W/m2</div>
				</div> 
				<div style="margin-left:32px;">
					<div class="buildingName">&nbsp;</div>
					<div id="Energy" class="valueSpanY"><img src = "grid.png" style="height: 20px;"/><span style="margin-left: 5px;vertical-align: -2px;">0 <span style="font-size:13px;">KWh</span></span></div>
				</div>
			</div>
			<div class="yieldDivs" id="div3">
				<div class="yieldDivsChild">
					<img alt="" src="house.png">
				</div>
				<div style="margin-left:5px;">
					<div class="buildingName">TMTC-CB1</div>
					<div class="valueSpanY"><img src = "energy.png" style="height: 19px;"/><span id="YieldIT3">432.87 KWh</span></div>
				</div>
				<div style="margin-left:25px;display: none;">
					<div id="irradienceData3" class="valueSpanY" style="margin-top: 12px;">902.33 W/m2</div>
				</div> 
				<div style="margin-left:32px;">
					<div class="buildingName">&nbsp;</div>
					<div id="Energy" class="valueSpanY"><img src = "grid.png" style="height: 20px;"/><span style="margin-left: 5px;vertical-align: -2px;">0 <span style="font-size:13px;">KWh</span></span></div>
				</div>
			</div>
			<div class="yieldDivs" id="div4">
				<div class="yieldDivsChild">
					<img alt="" src="house.png">
				</div>
				<div style="margin-left:5px;">
					<div class="buildingName">TMTC-CB2</div>
					<div class="valueSpanY"><img src = "energy.png" style="height: 19px;"/><span id="YieldIT4">432.87 KWh</span></div>
				</div>
				 <div style="margin-left:25px;display: none;">
					<div id="irradienceData4" class="valueSpanY" style="margin-top: 12px;">902.33 W/m2</div>
				</div> 
				<div style="margin-left:32px;">
					<div class="buildingName">&nbsp;</div>
					<div id="Energy" class="valueSpanY"><img src = "grid.png" style="height: 20px;"/><span style="margin-left: 5px;vertical-align: -2px;">0 <span style="font-size:13px;">KWh</span></span></div>
				</div>
				</div>
  </div>
  </px-modal>
								
								
					
					<!-- </div> -->
					<div style="margin-left: 30px;margin-top: 7px;font-size: 12px;">
						<img alt="" src="energy.png" style="height:15px;"> Energy<br>
						<img alt="" src="grid.png" style="height:15px;margin-top: 4px;margin-left: 2px;"> <span style="vertical-align: -4px;">&nbsp;Grid</span>
					</div>
				</div>
				
				</div>
				
			</div>
		<!-- IRRADIANCE(Average)
		<table style="width:100%">
		<tr style="background:#27ae60;color:#FFFFFF;"><td align="center">Block</td><td align="center">Irradiance</td><td align="center">Energy</td></tr>

		<tr><td align="center">IT-1</td><td align="center" id="irradienceData1">1062 W/m2</td><td align="center" id="irrEnergy1">134.5 KWh</td></tr>

		<tr><td align="center">IT-2</td><td align="center" id="irradienceData2">1045 W/m2</td><td align="center" id="irrEnergy2">142.8 KWh</td></tr>

		<tr><td align="center">CB-1</td><td align="center" id="irradienceData3">1033 W/m2</td><td align="center" id="irrEnergy3">135.2 KWh</td></tr>		
				
		<tr><td align="center">CB-2</td><td align="center" id="irradienceData4">1048 W/m2</td><td align="center" id="irrEnergy4">135.9 KWh</td></tr>				
		</table> -->

		</div>

</paper-material>

</div>



<div id="content1-dashboard">
<div id="secondrow">
<div id="three">
<paper-material elevation="1" style="padding:10px;">
		<iron-ajax id="ajaxLatestData"
			auto
			url="https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getGraphData?tagName=AC_Total_S_CB"
			last-response="{{data}}"
			on-response="_onResponseLatestData"
			handleAs="json">
		</iron-ajax>
			<!-- url="http://10.56.69.54:9072/services/windservices/getGraphData?tagName=AC_Total_S_CB" -->
		
<div class="heading">
<img alt="" src="house.png" style="height: 20px;vertical-align: text-bottom;"> <b><span id="yieldNameSpan">TMTC-IT1</span> YIELD</b>
</div>

<div id="container11" style="width: 100%; height: 270px;">
 	<px-vis-timeseries id="timeSeriesDataId" include-all-series="true" 
 		enable-tooltip="true" 
 		prevent-resize="true" 
 		width="680" height="180" 
 		selection-type="yAxis" 
 		register-location="none">
 	</px-vis-timeseries>
 </div> 

</paper-material>

</div>


<div id="four">
<paper-material elevation="1" style="padding:10px;    height: 342px;">
<div class="heading">
<img alt="" src="inv.png" style="height: 20px;"> <b><span id="cbNameSpan">TMTC-IT1</span> Combiner Box</b>
</div>
<paper-material id="boxLayout" elevation="0">
		<iron-ajax id="circuitDataT" auto url="https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getSelectedTagsData?requiredtags=AC_Total_S_CB,ACVoltageCB,ACCurrentCB,ACFrequencyCB,EnergyCB,AC_Total_Q_CB,THD_INV1,AC_Total_P_CB,Irradiance" 
		last-response="{{data1}}" on-response="callServiceByInterval" handleAs="json">
		</iron-ajax>
		<div style="width:100%;color:#206b64;background:#f0f7eb;height:35px;margin-top: 3px;">
			<span style="background: #27ae60;padding: 5px 10px 9px 10px;border-right:1px solid #FFFFFF;">
			<img src = "power.png" class="combinerBoxLabelImg"></span>
			<span style="font-size:14px;font-family: GE Inspira Sans,sans-serif">Power: <span class="digital_color" style="font-size:21px;"><span id="dashPowerC1">{{data1.0.value}}</span></span> KVA</span>
		</div>
		<div style="width:100%;color:#206b64;background:#f0f7eb;height:35px;margin-top: 3px;">
			<span style="background: #27ae60;padding: 5px 10px 9px 10px;border-right:1px solid #FFFFFF;">
			<img src = "energy..png" class="combinerBoxLabelImg"></span>
			<span style="font-size:14px;font-family: GE Inspira Sans,sans-serif">Active Power : <span class="digital_color" style="font-size:21px;"><span id="dashACP">{{data1.7.value}}</span></span> KW</span>
		</div> 
		<div style="width:100%;color:#206b64;background:#f0f7eb;height:35px;margin-top: 3px;">
			<span style="background: #27ae60;padding: 5px 10px 9px 10px;border-right:1px solid #FFFFFF;">
			<img src = "rp.png" class="combinerBoxLabelImg"></span>
			<span style="font-size:14px;font-family: GE Inspira Sans,sans-serif">Reactive Power: <span class="digital_color" style="font-size:21px;"><span id="dashRPID">{{data1.5.value}}</span></span> KVAr</span>
		</div>
		<div style="width:100%;color:#206b64;background:#f0f7eb;height:35px;margin-top: 3px;">
			<span style="background: #27ae60;padding: 5px 10px 9px 10px;border-right:1px solid #FFFFFF;">
			<img src = "voltag.png" class="combinerBoxLabelImg"></span>
			<span style="font-size:14px;font-family: GE Inspira Sans,sans-serif">Voltage: <span class="digital_color" style="font-size:21px;"><span id="dashPowerCV">{{data1.1.value}}</span></span> Volts</span>
		</div> 
		<div style="width:100%;color:#206b64;background:#f0f7eb;height:35px;margin-top: 3px;">
			<span style="background: #27ae60;padding: 5px 10px 9px 10px;border-right:1px solid #FFFFFF;">
			<img src = "current.png" class="combinerBoxLabelImg"></span>
			<span style="font-size:14px;font-family: GE Inspira Sans,sans-serif">Current: <span class="digital_color" style="font-size:21px;"><span id="dashPowerCC">{{data1.2.value}}</span></span> Amps</span>
		</div> 
		<div style="width:100%;color:#206b64;background:#f0f7eb;height:35px;margin-top: 3px;">
			<span style="background: #27ae60;padding: 5px 10px 9px 10px;border-right:1px solid #FFFFFF;">
			<img src = "frequency.png" class="combinerBoxLabelImg"></span>
			<span style="font-size:14px;font-family: GE Inspira Sans,sans-serif">Frequency: <span class="digital_color" style="font-size:21px;"><span id="dashPowerCF">{{data1.3.value}}</span></span> Hz</span>
		</div> 
		<div style="width:100%;color:#206b64;background:#f0f7eb;height:35px;margin-top: 3px;">
			<span style="background: #27ae60;padding: 5px 10px 9px 10px;border-right:1px solid #FFFFFF;">
			<img src = "thd.png" class="combinerBoxLabelImg"></span>
			<span style="font-size:14px;font-family: GE Inspira Sans,sans-serif">THD: <span class="digital_color" style="font-size:21px;"><span id="dashPowerCT">{{data1.6.value}}</span></span> %</span>
		</div> 
	<!-- <div id="boxLeft">
		<span>P: <span class="digital_color"><span id="dashPowerC">{{data1.0.value}}</span></span> K Watts</span><br>
		<span>V: <span class="digital_color">{{data1.1.value}}</span> Volts</span><br>
		<span>I : <span class="digital_color">{{data1.2.value}}</span> Amps</span><br>
	</div>
	<div id="boxRight">
		<span>F: <span class="digital_color">{{data1.3.value}}</span> Hz</span><br>
		<span>E: <span class="digital_color" id="dEnergy">{{data1.4.value}}</span> KWh</span>
	</div> -->

</paper-material>

</div>

</paper-material>
</div>


<div id="thirdrow" style="padding:10px;">
<paper-material >
<div class="heading">
<img alt="" src="bar.png" style="height: 20px;"> <b>TMTC Total Yield</b>
</div>
			<!-- <iron-ajax id="ajaxOne"
			auto
			url="https://solarassetservices.run.aws-usw02-pr.ice.predix.io/Asset/getClassifications/CBS"
			last-response="{{data}}"
			on-response="_onResponseNew"
			handleAs="json">
			</iron-ajax>   -->
  <div id="container21" style="height: 300px; min-width: 155px; max-width: 800px;margin: 0 auto;">
	<!-- <google-chart id="mutating-chart" type="column" 
	options='{"title": "","vAxis": {"minValue" : 0, "maxValue": 170},"animation": {"duration": "1000"}}'
              cols='[{"label": "Data", "type": "string"},
              {"label": "Energy", "type": "number"}]'
              rows='[["IT1", 126.3],["IT2", 113.5],["CB1", 110],["CB2", 135]]'
              >
    <google-chart-loader width="700" id="loader" class="style-scope google-chart"></google-chart-loader>
  </google-chart>  -->
  
  <google-chart id="barchartG" type="column" options='{"title": "", "legend": "none"}' data="chart-data.json">
    <google-chart-loader id="loader" class="style-scope google-chart"></google-chart-loader>
  </google-chart>
  
  <!-- <px-simple-bar-chart width="auto" height="270" chart-data='[[50,0,0,0],[0,20,0,0],[0,0,30,0],[0,0,0,40]]' legend-labels='["IT1","IT2","CB1", "CB2"]' colors='["red", "blue", "green", "orange"]' legend-order="sequential" tooltip-Prefix="Yield:" tooltip-Suffix="KwH" ></px-simple-bar-chart>
   -->
  </div> 
  
  
<br>
</paper-material>
</div>

<div>
<!-- 	<px-chart data='[[1397102460000,11.4403],[1397139660000,13.1913],[1397177400000,12.8485],[1397228040000,10.975],[1397248260000,12.9377],[1397291280000,13.3795],[1397318100000,13.0869],[1397342100000,17.3758]]' zoom-controls="showcontrols" tooltip-date-format="MMM DD, YYYY" tooltip-time-format="HH:mm:ss ZZ" tooltip-timestamp="hide" tooltip-type="normal"><px-chart-series-line id='hpt-acc-position-cruise' data='[[data]]'></px-chart-series-line></px-chart>
 --></div>

</paper-material>

<!-- <iron-ajax id="yieldDataAjax" auto url="http://10.56.69.54:9072/services/windservices/getDatabyFilter?filterType=day&tagName=AC_Total_S_CB" -->
<iron-ajax id="yieldDataAjax" auto url="https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getDatabyFilter?filterType=day&tagName=AC_Total_S_CB"
  last-response="{{yieldData}}" on-response="setValuesToYieldData" handleAs="json"></iron-ajax>
  
  <!-- <iron-ajax id="irradianceDataAjax" auto url="http://10.56.69.54:9072/services/windservices/getIrradienceData?filterType=day&tagName=Irradiance" -->
  <iron-ajax id="irradianceDataAjax" auto url="https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getIrradienceData?filterType=day&tagName=Irradiance"
  last-response="{{irradianceData}}" on-response="setValuesToIrradiance" handleAs="json">
 </iron-ajax>
 

<!-- <google-chart id="line-chart" type="line" height="50" width = "50"
cols='[{"label": "Month", "type": "string"},{"label": "Days", "type": "number"}]' 
rows='[["Jan", 31],["Feb", 28],["Mar", 31],["Apr", 30],["May", 31],["Jun", 30]]'>
     </google-chart>  -->

</google-chart>



</div>
</template>
<script>

var todayDate = '';//todatDate.getDate();
var todayFlag = false;
var todayStartDate = "";
var calCount = 0, IrradianceVal = 0;
var filterType="day";
var energyArray=[];
var selectedMarker = "TMTC-IT1";
     Polymer({
                is: 'dashboard-view',	
				
				 properties:{
				  loadValue10: {
					type: Number,
					value : [0]
				},
				 loadValue20: {
					type: Number,
					value : [0]
				},
     /*  name: {type: Number},
	  graphValue: {type: Number},
	  categorieValues:{type:Array},`
	  dataValues:{type:Array} */
    },
    changeLocation : function(e){
    	//alert(e.target.getAttribute('id'));
    	//alert()
    	$("#"+selectedMarker).attr("icon","marker.png");
    	//$("#info"+selectedMarker).parent().parent().parent().parent().hide();
    	
    	$("#"+selectedMarker).removeAttr("open");
    	
    	selectedMarker = e.target.getAttribute('id');
    	//$("#info"+selectedMarker).css("display","none");
    	$("#"+selectedMarker).attr("icon","marker-selected.png");
    	$("#"+selectedMarker).attr("open","true");
    	$("#yieldNameSpan").text(selectedMarker);
    	$("#cbNameSpan").text(selectedMarker);
    	
    	//alert($("#info"+selectedMarker).parent().parent().parent().parent().attr("style"));
    	this.$.ajaxLatestData.generateRequest();
    	this.$.circuitDataT.generateRequest();
    	this.$.yieldDataAjax.generateRequest();
    	//$("#info"+selectedMarker).show();
    	//alert($("#info"+selectedMarker).text());
    },
     /* listeners: {
        'testVal.google-map-marker-click':'changeMarker'
      }, */
    ready : function(){
    	
    	
    	//alert(days[date.getDay()]);
    	//var arr = 
    	//	[1876.8025,5431.5137,10087.698,15428.685,20844.373,26349.088,31166.508,36319.25,39776.035,44442.02,47062.855,51788.254,54679.55,56645.965,60543.992,62789.824,63823.082,66486.65,68878.76,69880.72,73201.914,72778.73,74527.81,76155.336,77767.266,78551.65,80293.69,80642.68,82127.57,84277.086,84696.8,84042.9,85692.47,85863.086,87370.61,86899.32,88890.35,89176.305,90900.47,90405.13,89828.766,90633.664,91035.84,91184.55,93395.234,92614.54,93435.05,93643.77,93770.38,94758.89,96178.96,94008.22,94313.234,95571.13,96873.3,96442.734,97697.83,98673.35,96257.17,97573.42,96820.48,97635.86,97069.49,99656.45,97935.15,100125.8,99891.88,99524.73,100710.69,99784.73,98092.79,99904.234,99669.24,99282.33,99935.61,100715.97,100278.62,98376.695,100387.93,99136.88,101989.945,99073.914,100426.69,100555.04,100411.445,100232.72,99259.27,100764.85,101335.8,100737.375,101223.43,101490.35,99803.66,99969.78,100739.945,101907.43,100786.48,102284.1,100941.73,100559.875,100130.25,98726.805,99528.664,101762.79,101291.41,98927.88,102050.17,101697.15,100107.38,101717.49,102041.22,100735.38,101114.69,101084.17,101906.99,98905.69,100230.65,99100.734,100298.445,100729.74,98517.83,100638.45,99301.484,100421.99,99359.305,98490.56,100241.07,101026.16,98902.69,100503.43,99061.4,98925.5,97950.125,99736.625,100614.72,98724.53,99523.07,100276.41,99016.62,98490.11,99610.44,98625.62,96969.39,96588.51,96700.79,98074.96,97269.484,96725.945,96043.38,96323.31,96230.02,95681.33,96859.49,97062.48,94941.1,94252.05,94149.68,93496.4];
    //	console.log(arr.length);
    //	var val = 0;
    //	for(var i=0;i<=arr.length-1;i++){
    //		val = val+arr[i];
    //	}
   // 	console.log(val);
    },
    handleGoogleMapData : function(data){
    	//alert(data);
    	//alert($("#TMTC-IT1").attr("icon"));
    	//$("#TMTC-IT1").attr("icon","marker-selected.png");
    	/*  console.log(data.detail.response.data);
    	var length = data.detail.response.data.length;
    	var item = data.detail.response.data;  */
    	//alert($("#googleMap").attr("style"));
    	/*  for(var i=0;i<=length-1;i++){
    		$("#googleMap").append("<google-map-marker  latitude="+item[i].location.latitude+" longitude="+item[i].location.longitude+"  title="+item[i].name+" icon= 'marker.png' id="+item[i].name+">"+item[i].name+"</google-map-marker>");
    	} */
    	// $("#googleMap").attr("fit-to-markers","true");
    	this.async(function() {
      		 console.log("Async Called");
    		$("#TMTC-IT1").attr("icon","marker-selected.png");
    		
    		selectedMarker = "TMTC-IT1";
    		$("#"+selectedMarker).attr("open","true");
             }, 2000);
    	//$("#TMTC-IT1").attr("icon","marker-selected.png");
    },
    listeners : {
    	'dayTab.tap':'getDayReport',
    	'weekTab.tap':'getWeeklyReport',
    	'monthTab.tap':'getMonthlyReport'
    },
    getDayReport : function(){
    	$("#dayTab").css("background","#27ae60");
    	$("#weekTab").css("background","#82E0AA");
    	$("#monthTab").css("background","#82E0AA");
    	
    	filterType="day"; 
    	
    	var url = "https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getDatabyFilter?filterType=day&tagName=AC_Total_S_CB";
    	$("#yieldDataAjax").attr("url",url);
    	
    	var url = "https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getIrradienceData?filterType=day&tagName=Irradiance";
    	$("#irradianceDataAjax").attr("url",url);
    	
    	//this.$.yieldDataAjax.generateRequest();
    	
    	// var map = document.querySelector('google-map');
	    //  map.styles = [{"featureType":"administrative","elementType":"all","stylers":[{"visibility":"on"},{"lightness":33}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2e5d4"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#c5dac6"}]},{"featureType":"poi.park","elementType":"labels","stylers":[{"visibility":"on"},{"lightness":20}]},{"featureType":"road","elementType":"all","stylers":[{"lightness":20}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#c5c6c6"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#e4d7c6"}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#fbfaf7"}]},{"featureType":"water","elementType":"all","stylers":[{"visibility":"on"},{"color":"#acbcc9"}]}]; 
	    //  console.log(map)

    },
    getWeeklyReport : function(){
    	$("#dayTab").css("background","#82E0AA");
    	$("#weekTab").css("background","#27ae60");
    	$("#monthTab").css("background","#82E0AA");
    	
    	filterType="week";
    	
    	var url = "https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getDatabyFilter?filterType=week&tagName=AC_Total_S_CB";
    	$("#yieldDataAjax").attr("url",url);
    	//this.$.yieldDataAjax.generateRequest();
    	var url = "https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getIrradienceData?filterType=week&tagName=Irradiance";
    	$("#irradianceDataAjax").attr("url",url);
    },
    getMonthlyReport : function(){
    	$("#dayTab").css("background","#82E0AA");
    	$("#weekTab").css("background","#82E0AA");
    	$("#monthTab").css("background","#27ae60");
    	
    	filterType="month";
    	
    	var url = "https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getDatabyFilter?filterType=month&tagName=AC_Total_S_CB";
    	$("#yieldDataAjax").attr("url",url);
    	
    	var url = "https://solar-test-timeseries-service.run.aws-usw02-pr.ice.predix.io/services/windservices/getIrradienceData?filterType=month&tagName=Irradiance";
    	$("#irradianceDataAjax").attr("url",url);
    	//this.$.yieldDataAjax.generateRequest();
    },
    callServiceByInterval : function(data){
    	this.async(function() {
   		 console.log("Async Called");
            this.$.circuitDataT.generateRequest();
          }, 10000);	
    	var value = data.detail.response[0].value/1000;
    	var value1 = data.detail.response[7].value/1000;
    	var value2 = data.detail.response[5].value/1000;
    	var value3 = data.detail.response[8].value;
    	//1236
    	var value4 = data.detail.response[1].value
    	var value5 = data.detail.response[2].value
    	var value6 = data.detail.response[3].value
    	var value7 = data.detail.response[6].value
    	
    	if(selectedMarker == "TMTC-IT2"){
    		value = value*0.98;
    		value1 = value1*0.98;
    		value2 = value2*0.98;
    		value3 = value3*0.98;
    		
    		value4 = value4*0.98;
    		value5 = value5*0.98;
    		value6 = value6*0.98;
    		value7 = value7*0.98;
    		
		}
		if(selectedMarker == "TMTC-CB1"){
			value = value*1.01;
			value1 = value1*1.01;
			value2 = value2*1.01;
			value3 = value3*1.01;
			
			value4 = value4*1.01;
			value5 = value5*1.01;
			value6 = value6*1.01;
			value7 = value7*1.01;
		}
		if(selectedMarker == "TMTC-CB2"){
			value = value*1.05;
			value1 = value1*1.05;
			value2 = value2*1.05;
			value3 = value3*1.05;
			
			value4 = value4*1.05;
			value5 = value5*1.05;
			value6 = value6*1.05;
			value7 = value7*1.05;
		}
		
    	//var energy = data.detail.response[4].value/1000;
    	$("#dashPowerC1").text(Math.round(value * 100) / 100);
    	$("#dashACP").text(Math.round(value1 * 100) / 100);
    	$("#dashRPID").text(Math.round(value2 * 100) / 100);
    	

		$("#dashPowerCV").text(Math.round(value4 * 100) / 100);
		$("#dashPowerCC").text(Math.round(value5 * 100) / 100);
		$("#dashPowerCF").text(Math.round(value6 * 100) / 100);
		$("#dashPowerCT").text(Math.round(value7 * 100) / 100);
		
    	$("#gaugeId").attr("data",'[["Label", "Value"],["Power", '+Math.round(value * 100) / 100+']]');
    	/* if(filterType == "day"){
    		$("#gaugeId").attr("options",'{"width": 100,"height": 100,"redFrom": 90,"redTo": 100,"yellowFrom":75,"yellowTo": 90,"minorTicks": 5,"min":1,"max" : 1200}');
    	}
    	if(filterType == "week"){
    		$("#gaugeId").attr("options",'{"width": 100,"height": 100,"redFrom": 90,"redTo": 100,"yellowFrom":75,"yellowTo": 90,"minorTicks": 5,"min":1,"max" : 8000}');
    	}
    	if(filterType == "month"){
    		$("#gaugeId").attr("options",'{"width": 100,"height": 100,"redFrom": 90,"redTo": 100,"yellowFrom":75,"yellowTo": 90,"minorTicks": 5,"min":1,"max" : 25000}');
    	} */
    	
    	IrradianceVal = value3;
    	//$("#dashIrrData").text(Math.round(value3 * 100) / 100).append("<sub>w/m<sup>2</sup></sub>");
    	
    },
    getRandomValue : function(){
    	var x = (Math.random() * 10.32) + 1;
    	x = Math.round(x*100)/100;
    	//var xArr = x.toString().split(".");
    	//console.log(xArr);
    	return x;
    },
    setValuesToYieldData : function(data){
    	//console.log("IT1-Energy : " + data.detail.response.AC_Total_S_CB + " Kwh");
    	console.log(new Date()+"      "+data.detail.response.AC_Total_S_CB);
    	
    	var YieldIT1 = Math.round(data.detail.response.AC_Total_S_CB*100)/100;
    	var YieldIT2 = Math.round((data.detail.response.AC_Total_S_CB*0.97)*100)/100;
    	var YieldIT3 = Math.round((data.detail.response.AC_Total_S_CB*1.01)*100)/100;
    	var YieldIT4 = Math.round((data.detail.response.AC_Total_S_CB*1.02)*100)/100;
    	
		/* if(selectedMarker == "TMTC-IT2"){
			YieldIT1 = YieldIT1*0.98;
			YieldIT2 = YieldIT2*0.98;
			YieldIT3 = YieldIT3*0.98;
			YieldIT4 = YieldIT4*0.98;
		}
		if(selectedMarker == "TMTC-CB1"){
			YieldIT1 = YieldIT1*1.01;
			YieldIT2 = YieldIT2*1.01;
			YieldIT3 = YieldIT3*1.01;
			YieldIT4 = YieldIT4*1.01;
		}
		if(selectedMarker == "TMTC-CB2"){
			YieldIT1 = YieldIT1*1.05;
			YieldIT2 = YieldIT2*1.05;
			YieldIT3 = YieldIT3*1.05;
			YieldIT4 = YieldIT4*1.05;
		} */
		
		 YieldIT1 = Math.round(YieldIT1*100)/100;
    	 YieldIT2 = Math.round(YieldIT2*100)/100;
    	 YieldIT3 = Math.round(YieldIT3*100)/100;
    	 YieldIT4 = Math.round(YieldIT4*100)/100;
    	
    	$("#YieldIT1").text(YieldIT1).append(" <span style='font-size:13px;'>KWh</span>");
    	$("#YieldIT2").text(YieldIT2).append(" <span style='font-size:13px;'>KWh</span>");
    	$("#YieldIT3").text(YieldIT3).append(" <span style='font-size:13px;'>KWh</span>");
    	$("#YieldIT4").text(YieldIT4).append(" <span style='font-size:13px;'>KWh</span>");
    	
    	$("#irrEnergy1").text(YieldIT1 +" KWh");
    	$("#irrEnergy2").text(YieldIT2 +" KWh");
    	$("#irrEnergy3").text(YieldIT3 +" KWh");
    	$("#irrEnergy4").text(YieldIT4 +" KWh");
    	
    	$("#div1").attr("title","\nBuilding Name : TMTC-IT1 \n Energy : "+YieldIT1 +" KWh"+"  \n Irradiance : "+$("#irradienceData1").text()+" w/m2  \n Grid : + 0 KWh");
    	$("#div2").attr("title","Farm Name : TMTC-IT1 \n Energy : "+YieldIT2 +" KWh"+"  \n Irradiance : "+$("#irradienceData2").text()+" w/m2  \n Grid : + 0 KWh");
    	$("#div3").attr("title","Building Name : TMTC-IT1 \n Energy : "+YieldIT3 +" KWh"+"  \n Irradiance : "+$("#irradienceData3").text()+" w/m2  \n Grid : + 0 KWh");
    	$("#div4").attr("title","Building Name : TMTC-IT1 \n Energy : "+YieldIT4 +" KWh"+"  \n Irradiance : "+$("#irradienceData4").text()+" w/m2  \n Grid : + 0 KWh\n");
    	//[["Bar", "Energy", { "role": "style" } ], ["IT1", 136.5, "color: rgb(102, 200, 149)"], ["IT2", 120.6, "color: rgb(42, 187, 155)"], ["CB1", 146, "color: rgb(25, 202, 131)"], ["CB2", 112.5,"color: rgb(4, 147, 114)"]]
		
    	
    	$("#tempData").text(YieldIT1).css("font-family","BebasNeue-font").append("<span style='font-size:13px;font-family:Arial, Helvetica, sans-serif;'>KWh</span>");
    	var mainArr=[], subArr=[];
    	subArr = ["Bar",
    	          "Energy(KWh)",
    	          {"role":"style"}
    	          ]
		mainArr.push(subArr);
    	
    	for(var i=0;i<=4;i++){
    		subArr=[];
    		if(i==1){
    			subArr=["IT1",YieldIT1,"color: rgb(102, 200, 149)"];
    			mainArr.push(subArr);
    		}
    		if(i==2){
    			subArr=["IT2",YieldIT2,"color: rgb(42, 187, 155)"];
    			mainArr.push(subArr);
    		}
    		if(i==3){
    			subArr=["CB1",YieldIT3,"color: rgb(25, 202, 131)"];
    			mainArr.push(subArr);
    		}
    		if(i==4){
    			subArr=["CB2",YieldIT4,"color: rgb(4, 147, 114)"];
    			mainArr.push(subArr);
    		}
    	}
    	
    	console.log("DATA : " + JSON.stringify(mainArr));
    	$("#barchartG").attr("data",JSON.stringify(mainArr));
    	
    	$("#mapPowerValId").text(YieldIT1).append("<sub>K&nbsp;Wh</sub>");
    	
		
		if(selectedMarker == "TMTC-IT2"){
			YieldIT1 = YieldIT2;
		}
		if(selectedMarker == "TMTC-CB1"){
			YieldIT1 = YieldIT3;
		}
		if(selectedMarker == "TMTC-CB2"){
			YieldIT1 = YieldIT4;
		}
		var amt = YieldIT1*12;
		//alert(amt);
		$("#revenueId").text(Math.round(amt * 100) / 100).prepend("&#x20B9;");
		$("#progressID").attr("value",Math.round(amt * 100) / 100);
		//for co2 and trees
		var co2 = (YieldIT1*445)/1000;
		var trees = co2*0.32251;
		$("#tempData").text(YieldIT1).css("font-family","BebasNeue-font").append("<span style='font-size:13px;font-family:Arial, Helvetica, sans-serif;'>KWh</span>");
		$("#windData").text(Math.round(co2 * 100) / 100).css("font-family","BebasNeue-font").append("<span style='font-family:Arial, Helvetica, sans-serif;font-size:20px;'><sub>Kg</sub></span>");
    	$("#humidityData").text(Math.round(trees)).css("font-family","BebasNeue-font");
    	
    	if(filterType == "day"){
    		if(YieldIT1 !=0)
    			if(energyArray.indexOf(YieldIT1) < 0)
    				energyArray.push(YieldIT1);
    		
    	}
    	
    	localStorage.energyVal  = energyArray;
    	var myProp = localStorage.getItem("energyVal");
    	//alert(myProp);
    	
    
    	//$(".sparkline").find("canvas").attr("style","display: block; width: 153px; height: 20px; vertical-align: top;")
    	/*  $(".sparkline").each(function () {
    	      var $this = $(this);
    	      $this.sparkline(myvalues);
    	    }); */
        // $('.linecustom').sparkline(myvalues);
        // $('.sparkline-1').sparkline();
        /*  $('#linecustom').sparkline(myvalues,'html',
        {
          height: '2.5em', width: '8em', lineColor: '#666', fillColor: '#666',
          minSpotColor: false, maxSpotColor: false, spotColor: '#666', spotRadius: 3
        });
		 */
        // $("#linecustom").find("canvas").attr("style","display: block; width: 153px; height: 30px; vertical-align: top;")
         
    	this.async(function() {
            this.$.yieldDataAjax.generateRequest();
          }, 10000);
    },
    setValuesToIrradiance : function(data){
    	var irradienceData1 = Math.round(data.detail.response.Irradiance*100)/100;
    	var irradienceData2 = Math.round((data.detail.response.Irradiance*0.98)*100)/100;
    	var irradienceData3 = Math.round((data.detail.response.Irradiance*1.01)*100)/100;
    	var irradienceData4 = Math.round((data.detail.response.Irradiance*1.02)*100)/100;
    	$("#irradienceData1").text(irradienceData1).append(" W/m<sup>2</sup>");
    	$("#irradienceData2").text(irradienceData2).append(" W/m<sup>2</sup>");
    	$("#irradienceData3").text(irradienceData3).append(" W/m<sup>2</sup>");
    	$("#irradienceData4").text(irradienceData4).append(" W/m<sup>2</sup>");
    	
    	this.async(function() {
            this.$.irradianceDataAjax.generateRequest();
          }, 10000);
    },
	_updateDataNew: function() {
          this.async(function() {
          this.$.ajaxOne.generateRequest();
        }, 30000);
     },
          
          loadData : function(data){
        	  calCount = calCount+1;
      		/* console.log(data.detail.response.wind.speed); */
      		var value = data.detail.response.data.main.temp-273;
      		var clouds = data.detail.response.data.clouds.all;
      		
      		if(calCount == 1){
      			if(clouds > 0){
          			$("#wetherInfoImg").attr("src","clouds.png").attr("style","height:33px");
          		}else{
          			$("#wetherInfoImg").attr("src","temp.png").attr("style","height:25px");
          		}
      			$("#titleID").text("Temperature");
      			$("#dashIrrData").text(data.detail.response.data.wind.speed).css("font-family","BebasNeue-font").append("<sub><span style='vertical-align: 4px;font-size: 18px;font-family:Arial, Helvetica, sans-serif;'>m/s</span></sub>");
      		}else if(calCount == 2){
          			$("#wetherInfoImg").attr("src","wind.png").attr("style","height:35px;margin-top: -7px;");
      				$("#titleID").text("Wind");
      				$("#dashIrrData").text(data.detail.response.data.wind.speed).css("font-family","BebasNeue-font").append("<sub><span style='vertical-align: 4px;font-size: 18px;font-family:Arial, Helvetica, sans-serif;'>m/s</span></sub>");
      		}else if(calCount == 3){
      					$("#wetherInfoImg").attr("src","humidity.png").attr("style","height:35px;margin-top: -7px;");
          				$("#titleID").text("Humidity");
          				$("#dashIrrData").text(data.detail.response.data.main.humidity).css("font-family","BebasNeue-font").append("<sub><span style='vertical-align: 4px;font-size: 18px;font-family:Arial, Helvetica, sans-serif;'>%</span></sub>");
      		}else if(calCount == 4){
      				$("#wetherInfoImg").attr("src","irradience.png").attr("style","height:38px;");
  					$("#titleID").text("Irradiance");
  					$("#dashIrrData").text(Math.round(IrradianceVal * 100) / 100).css("font-family","BebasNeue-font").append("<span style='font-family:Arial, Helvetica, sans-serif;'><sub>w/m<sup>2</sup></sub></span>");
      		}else{
      			if(clouds > 0){
          			$("#wetherInfoImg").attr("src","clouds.png").attr("style","height:33px");
          		}else{
          			$("#wetherInfoImg").attr("src","temp.png").attr("style","height:25px");
          		}
      			$("#titleID").text("Temperature");
      			$("#dashIrrData").text(data.detail.response.data.wind.speed).css("font-family","BebasNeue-font").append("<sub><span style='vertical-align: 4px;font-size: 18px;font-family:Arial, Helvetica, sans-serif;'>m/s</span></sub>");
      		}
      		
      		/* $("#tempData").text(Math.round(value, 2)).append("<sup>o</sup>C");
      		$("#windData").text(data.detail.response.data.wind.speed).append("<sub><span style='vertical-align: 6px;font-size: 18px;'>m/s</span></sub>");
      		$("#humidityData").text(data.detail.response.data.main.humidity).append("<sub><span style='vertical-align: 6px;font-size: 18px;'>%</span></sub>");
      		//$("#rainfallData").text(data.detail.response.data.clouds.all).append("<sub><span style='vertical-align: 6px;font-size: 18px;'>%</span></sub>");
      		var clouds = data.detail.response.data.clouds.all;
      		if(clouds > 0){
      			$("#tempDataIconID").attr("src","clouds.png").attr("style","height:33px");
      		}else{
      			$("#tempDataIconID").attr("src","temp.png").attr("style","height:25px");
      		}
      		 */
      		//$("#dashIrrData").text(Math.round(value3 * 100) / 100).append("<sub>w/m<sup>2</sup></sub>");
      		var date = new Date();
         	var days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
         	var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
         	$("#dayId").text(days[date.getDay()]);
         	
         	//$("#tempData").text(date.getDate() +" " + months[date.getMonth()] +" " + date.getFullYear());
         	
         	$("#dateIdD").text(days[date.getDay()] +", " + date.getDate() +" " + months[date.getMonth()] +" " + date.getFullYear())
         	
      		if(calCount == 4){
      			calCount = 0;
      		}
      		this.async(function() {
          		 console.log("Wether API Calling..");
                   this.$.ajax1.generateRequest();
                 }, 15000);
      		
      	},		
			  _onResponseNew: function(data) {
			dataValues = data.detail.response.values;
			categorieValues = data.detail.response.categories;
            this._updateDataNew();
			/* if(this.loadValue20 == 0)
			this._trailgraphNew(); */
          }	
				,
				  _updateLatestDataNew: function() {
			            this.async(function() {
			              this.$.ajaxLatestData.generateRequest();
			            }, 100000);
			          },
				_onResponseLatestData : function(data){
					var d = new Date();
		      		var startDate = null, endDate = null;
		      		var categories = data.detail.response.categories;
					var values = data.detail.response.values;
					
					//values = data.detail.response.valuesMap.AC_Total_S_CB;
					//var irrData = data.detail.response.valuesMap.Irradiance;
					//alert(irrData);
					var TEnergy = 0;
					var arr=[],obj={};
					
					var value=0,count=0;
					for(var t=0;t<=values.length-1;t++){
						value = value+(values[t]/1000);
						var dateInFor = new Date(d.getDate()+"/"+d.toDateString().substr(4,3)+"/"+d.getFullYear()+" "+ categories[t]);
						//console.log("Date : "+dateInFor);
						var dat = new Date(dateInFor+' UTC');
						dat.toString();
						
						var graphVal = values[t]/1000;
						if(selectedMarker == "TMTC-IT2"){
							graphVal = graphVal*0.98;
						}
						if(selectedMarker == "TMTC-CB1"){
							graphVal = graphVal*1.01;
						}
						if(selectedMarker == "TMTC-CB2"){
							graphVal = graphVal*1.05;
						}
						
							
						//console.log("Dat : "+dat);
						obj = {
								"x" : dat.getTime(),
								"Power(KW)" : graphVal
								//"Irradience" : irrData[t]/20
						}
						arr.push(obj);
						TEnergy = TEnergy+(graphVal);
						
						if(startDate == null){
							if(values[t] != 0){
								startDate = categories[t];
							}
						}
						if(startDate !=null){
							if(values[t] == 0){
								endDate = categories[t];
							}
						}
					}
					console.log("Value : "+ value +" Count : " + values.length);
					if(endDate == null){
						endDate = categories[values.length-1];
					}
					var timeStart = new Date(d.getDate()+"/"+d.toDateString().substr(4,3)+"/"+d.getFullYear()+" "+ startDate).getHours();
					var timeEnd = new Date(d.getDate()+"/"+d.toDateString().substr(4,3)+"/"+d.getFullYear()+" "+ endDate).getHours();
					var hourDiff = timeEnd - timeStart;      
					console.log("Total Energy : "+TEnergy +" in Whats");
					
					var vals = (TEnergy.toFixed(2));
					var roundVal = Math.round(vals * 100) / 100
					//$("#dashBEnergy").text(roundVal);
					var currency = roundVal/hourDiff;
					$("#timeSeriesDataId").attr("chart-data",JSON.stringify(arr));
					
					
					 this.async(function() {
		          		 console.log("Graph Service Calling..");
		                   this.$.ajaxLatestData.generateRequest();
		                 }, 10000);
				//if(this.loadValue10 == 0)
		      		//this._trailgraph(categories,values);
		      	},	

				
			
     });
     function onReady(callback) {
	        var intervalID = window.setInterval(checkReady,2000);
	        function checkReady() {
	            if (document.getElementsByTagName('body')[0] !== undefined) {
	                window.clearInterval(intervalID);
	                callback.call(this);
	            }
	        }
	    }

    onReady(function () {
	        $('#load-dashboard').hide();
	       $('#content-dashboard,#content1-dashboard').css("visibility","visible");

	    })
        </script>
    </dom-module>
